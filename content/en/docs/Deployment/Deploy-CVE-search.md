---
linkTitle: "CVE Scheduler"
title: "CVE Scheduler"
weight: 100
description: 
  SW360 CVE Schedules
---

# How to use SW360 CVE schedule

SW360 obtains vulnerability information from the Common Vulnerabilities and Exposures (CVE) database. It can connect to your local cve-search server.  
_A few years ago, SW360 was able to retrieve vulnerability information from an online CVE server, but this feature is no longer active._

## Install cve-search

cve-search is a tool that imports CVE (Common Vulnerabilities and Exposures) and CPE (Common Platform Enumeration) data into a MongoDB database to facilitate search and processing of CVEs. You can choose between Docker installation or native installation.

### Docker Installation

For Docker installation, refer to the [CVE-Search-Docker GitHub repository](https://github.com/cve-search/CVE-Search-Docker).

Clone the repository and start the service using `docker-compose`:

```sh
$ git clone https://github.com/cve-search/CVE-Search-Docker.git
$ cd CVE-Search-Docker
$ docker-compose up
```

### Native Installation

For native installation, refer to the [cve-search GitHub repository](https://github.com/cve-search/cve-search).

1. **Clone the source:**

   ```sh
   $ git clone https://github.com/cve-search/cve-search.git
   $ cd cve-search
   $ git checkout {tag/branch}
   ```

2. **Install system requirements:**

   ```sh
   $ sudo apt-get install -y $(cat requirements.system)
   ```

3. **Install cve-search and its Python dependencies:**

   ```sh
   $ pip3 install -r requirements.txt
   ```

4. **Install MongoDB:**

   ```sh
   $ wget -qO - https://www.mongodb.org/static/pgp/server-4.4.asc | sudo apt-key add -
   $ codename=$(lsb_release --codename --short)
   $ echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu ${codename}/mongodb-org/4.4 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-4.4.list
   $ sudo apt-get update
   $ sudo apt-get install -y mongodb-org
   $ sudo systemctl daemon-reload
   $ sudo systemctl start mongod
   # Verify status of MongoDB
   $ sudo systemctl status mongod
   # If all is ok, enable MongoDB to start on system startup
   $ sudo systemctl enable mongod
   ```

5. **Populate the database:**

   ```sh
   $ sudo apt-get install redis-server
   # Modify: stop-writes-on-bgsave-error yes -> no
   $ sudo vim /etc/redis/redis.conf
   $ sudo systemctl daemon-reload
   $ sudo systemctl restart redis
   $ ./sbin/db_mgmt_cpe_dictionary.py -p
   $ ./sbin/db_mgmt_json.py -p
   $ ./sbin/db_updater.py -c  # This may take over 45 minutes on a decent machine; please be patient
   ```

6. **Update the database:**

   ```sh
   $ ./sbin/db_updater.py -v
   ```

7. **Start and stop the web server:**

   ```sh
   # Install psutil >= 5.7.0
   $ pip3 install 'psutil>=5.7.0'
   # Starting web server
   $ python3 web/index.py
   ```

   The default web server runs at: http://localhost:5000

   To stop the server, press `CTRL+C`.

   **Note:** By default, cve-search makes assumptions about certain configuration aspects of the application. You can adjust these settings:

   ```sh
   $ cp etc/configuration.ini.sample etc/configuration.ini
   $ vim etc/configuration.ini
   ```

## Setup SW360 with cve-search

1. **Change the default CVE server:**

   Modify the `cvesearch.host` property with your CVE server address:

   ```sh
   $ vim ${SW360_DIR_INSTALL}/backend/src/src-cvesearch/src/main/resources/cvesearch.properties
   ```

2. **Configure the CVE service schedule:**

   The offset (first run of the update) and the interval between updates can be adjusted.

   ```sh
   $ vim ${SW360_DIR_INSTALL}/backend/src/src-schedule/src/main/resources/sw360.properties
   ```

   The `offset` should be specified in seconds since midnight, and the `interval` should be entered in seconds. The default setting updates vulnerabilities via cve-search every night at midnight, corresponding to an offset of 0 and an interval of 24 hours (86,400 seconds).

   By default, cve-search is not auto-started with the scheduling service. To enable auto-start, set `autostart = cvesearchService`.

3. **Schedule task administration:**

   To view and start/stop schedules:

   Click `Admin` > `Schedule`.

## References

- CVE guide: [https://cve-search.github.io/cve-search/](https://cve-search.github.io/cve-search/)

- User Scheduling CVE Search by Admins: [https://github.com/eclipse/sw360/wiki/User-Scheduling-CVE-Search-by-Admins](https://github.com/eclipse/sw360/wiki/User-Scheduling-CVE-Search-by-Admins)
